services:
  corpaggregator:
    build:
      context: ./corpaggregator
    container_name: corpaggregator
    ports:
      - "8123:8123"
    environment:
      SPRING_DATASOURCE_URL: jdbc:h2:mem:testdb
      SPRING_DATASOURCE_DRIVER_CLASS_NAME: org.h2.Driver
      SPRING_DATASOURCE_USERNAME: sa
      SPRING_DATASOURCE_PASSWORD: password
    networks:
      - my-network

  telemetry-dashboard:
    build:
      context: ./telemetry-dashboard
    image: telemetry-dashboard
    container_name: telemetry
    ports:
      - "8080:80"
    networks:
      - my-network
    depends_on:
      - corpaggregator

  poweredge:
    build:
      context: ./poweredge
    container_name: poweredge
    ports:
      - "8124:8124"
    networks:
      - my-network
    depends_on:
      - corpaggregator

networks:
  my-network:
    driver: bridge